<Directory  /opt/peta/staticfiles/>
  Require all granted
</Directory>

<Directory  /opt/peta/media/>
  Require all granted
</Directory>

<VirtualHost *:80>
  KeepAlive On
  KeepAliveTimeout 60

  ErrorLog /dev/stdout
  CustomLog /dev/stdout combined

  ProxyRequests Off

  ProxyPassMatch ^/peta/static/ !
  ProxyPassMatch ^/peta/media/ !

  ProxyPass        / http://localhost:49152/
  ProxyPassReverse / http://localhost:49152/

  Alias /peta/static/ /opt/peta/staticfiles/
  Alias /peta/media/  /opt/peta/media/
</VirtualHost>

# For Docker Compose
Listen 8080
<VirtualHost *:8080>
  KeepAlive On
  KeepAliveTimeout 60

  ErrorLog /dev/stdout
  CustomLog /dev/stdout combined

  ProxyRequests Off

  ProxyPassMatch ^/peta/static/ !
  ProxyPassMatch ^/peta/media/ !

  ProxyPass        / http://peta-main:49152/
  ProxyPassReverse / http://peta-main:49152/

  Alias /peta/static/ /opt/peta/staticfiles/
  Alias /peta/media/  /opt/peta/media/
</VirtualHost>
